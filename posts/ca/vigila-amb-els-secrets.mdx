---
title: "Vigila amb els secrets: lâ€™atac que va tocar el teu servidor"
date: "2025-05-02"
summary: "Evita filtracions de secrets en producciÃ³. Analitzem un intent real dâ€™atac i tâ€™expliquem com protegir el teu servidor amb bones prÃ ctiques de seguretat."
image: "/images/vigila-els-secrets.png" 
categories: ["development"]
slug: "vigila-els-secrets"
---

## Com evitar la filtraciÃ³ de secrets quan publiques un projecte en producciÃ³

El dia 2 de maig del 2025, a les 02:41:37 del matÃ­, una IP dâ€™Amsterdam (213.232.87.232) va comenÃ§ar un escaneig sistemÃ tic del teu servidor. No buscava pÃ gines web. No volia veure contingut. Buscava secrets. I tu, estaves preparat?

Aquest tipus d'atac Ã©s mÃ©s comÃº del que et penses. I no, no Ã©s â€œhackingâ€ de pelÂ·lÃ­cula. Ã‰s nomÃ©s una mÃ quina fent peticions. PerÃ² les peticions sÃ³n intelÂ·ligents. I perilloses.

### ğŸ” QuÃ¨ buscava?

La llista Ã©s esgarrifosa:

-   `/.vscode/sftp.json`
    
-   `/server.key`
    
-   `/.ssh/id_rsa`
    
-   `/backup.sql`
    
-   `/.env`
    
-   `/cloud-config.yml`
    
-   `/secrets.json`
    
-   `/docker-compose.yml`
    
-   `/config.php`
    
-   `/.aws/credentials`
    
-   `/.git/HEAD`
    
-   i molts mÃ©s...
    

Tots ells sÃ³n fitxers que han estat exposats per error a producciÃ³ en centenars de projectes al mÃ³n. I tots poden contenir claus privades, secrets d'API, credencials, configuracions sensibles, cÃ²pies de seguretat... tot.

### ğŸ“‰ Una sola fuita = desastre

Quan publiques un projecte, especialment si uses frameworks com Laravel, Node.js, Django, etc., Ã©s fÃ cil oblidar-te fitxers com `.env`, `config.yml` o directoris sencers com `.git/`. A StackOverflow i a Hacker News, hi ha mÃºltiples histÃ²ries de desenvolupadors que han patit aquest error, com el cas famÃ³s on algÃº va commitejar per error les claus AWS en un repositori pÃºblic i, en menys dâ€™una hora, va tenir factures de milers de dÃ²lars per Ãºs maliciÃ³s de serveis â€¦.

### ğŸ” Bones prÃ ctiques per protegir secrets

Segons plataformes de detecciÃ³ de secrets com [ScatteredSecrets](https://scatteredsecrets.com) â€¦ i informes sobre trÃ fic maliciÃ³s â€¦, aquestes sÃ³n algunes mesures que haurien de ser obligatÃ²ries:

-   **Mai publiquis el teu `.env` o fitxers de configuraciÃ³ sensibles.** Usa `.gitignore`.
    
-   **Configura correctament el teu servidor.** Tot arxiu que comenci amb punt (`.`) hauria d'estar denegat per lâ€™HTTP server.
    
-   **Evita exposar directoris com `.git`, `.svn`, `node_modules`, `vendor` o `storage`.**
    
-   **Audita el teu repositori.** Hi ha eines com [`git-secrets`](https://github.com/awslabs/git-secrets) o [`truffleHog`] per buscar secrets abans de fer `push`.
    
-   **Desplega nomÃ©s lâ€™artefacte de producciÃ³.** Mai la font sencera. Usa pipelines per netejar i empaquetar.
    
-   **Monitoritza els logs.** Les peticions rebudes com les que tâ€™hem mostrat sÃ³n una alerta clara que algÃº tâ€™estÃ  escanejant.
    

### ğŸ›¡ï¸ El teu servidor ha resistitâ€¦ aquesta vegada

Fixat bÃ©: de les peticions de lâ€™atac, moltes han tornat un `403 Forbidden` o un `404 Not Found`. Afortunadament. PerÃ² nomÃ©s cal una fuita mal configurada per obrir la porta.

El futur dels teus sistemes depÃ¨n del que facis avui. No esperis a veure un `GET /.env` amb un `200 OK` al teu log per actuar.